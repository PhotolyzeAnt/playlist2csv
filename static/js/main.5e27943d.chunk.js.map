{"version":3,"sources":["spotify.js","App.js","utils.js","index.js"],"names":["scopes","window","location","hash","substring","split","reduce","values","item","parts","s","replace","word","index","toLowerCase","toUpperCase","decodeURIComponent","accessToken","tokenType","history","pushState","document","title","pathname","search","App","useState","playlist","setPlaylist","fetching","setFetching","input","setInput","e","a","preventDefault","playlistId","fetch","method","headers","Authorization","then","res","json","fetchedPlaylist","tracks","next","items","formattedTracks","filter","track","tracksArray","inputArtists","push","name","artists","map","join","type","onSubmit","handleSubmit","htmlFor","id","value","onChange","target","disabled","href","encodeURIComponent","download","key","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.5e27943d.chunk.js","sourcesContent":["const authEndpoint = \"https://accounts.spotify.com/authorize\"\nconst clientId = \"f10fc34ec54b46fc92b4086dd5d86fcd\"\nconst redirectUri = \"https://photolyzeant.github.io/playlist2csv/\"\n\nconst scopes = [\"playlist-read-private\"]\n\nexport function getAuthHref() {\n  return `${authEndpoint}?client_id=${clientId}&redirect_uri=${redirectUri}&scope=${scopes.join(\n    \"%20\"\n  )}&response_type=token`\n}\n\nexport function formatTracks(inputTracks) {\n  const tracks = inputTracks.items\n    .filter(({ track }) => track)\n    .reduce((tracksArray, { track }) => {\n      tracksArray.push({\n        name: track.name,\n        artists: formatArtists(track.artists),\n      })\n      return tracksArray\n    }, [])\n  return tracks\n}\n\nexport function formatArtists(inputArtists) {\n  const artists = inputArtists.map(({ name }) => name).join(\", \")\n  return artists\n}\n","import React, { useState } from \"react\"\nimport { getAuthHref, formatTracks } from \"./spotify\"\nimport { camelize, removeHash } from \"./utils\"\n\nconst { accessToken, tokenType } = window.location.hash\n  .substring(1)\n  .split(\"&\")\n  .reduce((values, item) => {\n    if (item) {\n      const parts = item.split(\"=\")\n      values[camelize(parts[0])] = decodeURIComponent(parts[1])\n    }\n    return values\n  }, {})\n\nremoveHash()\n\nfunction App() {\n  const [playlist, setPlaylist] = useState(null)\n  const [fetching, setFetching] = useState(false)\n  const [input, setInput] = useState(\"\")\n\n  async function handleSubmit(e) {\n    e.preventDefault()\n    setFetching(true)\n\n    const playlistId = input.split(\":\")[2]\n\n    const fetchedPlaylist = await fetch(\n      `https://api.spotify.com/v1/playlists/${playlistId}`,\n      {\n        method: \"GET\",\n        headers: { Authorization: `${tokenType} ${accessToken}` },\n      }\n    ).then((res) => res.json())\n\n    let res = fetchedPlaylist.tracks\n\n    while (res.next) {\n      res = await fetch(res.next, {\n        method: \"GET\",\n        headers: { Authorization: `${tokenType} ${accessToken}` },\n      }).then((res) => res.json())\n\n      fetchedPlaylist.tracks.items = [\n        ...fetchedPlaylist.tracks.items,\n        ...res.items,\n      ]\n    }\n\n    setPlaylist(fetchedPlaylist)\n    setInput(\"\")\n    setFetching(false)\n  }\n\n  // spotify:playlist:6zWsEoJ3ziANLkqqMIUhEU\n\n  function getCsvHref(tracks) {\n    return (\n      \"data:text/plain;charset=utf-8,\" +\n      encodeURIComponent(\n        \"Title\\tArtist\\tCode\\n\" +\n          tracks.map(({ name, artists }) => `${name}\\t${artists}\\t\\n`).join(\"\")\n      )\n    )\n  }\n\n  const formattedTracks = playlist ? formatTracks(playlist.tracks) : null\n\n  return !accessToken ? (\n    <div>\n      <h1>Authorize with spotify</h1>\n      <a href={getAuthHref()}>Click to authorize</a>\n    </div>\n  ) : (\n    <div>\n      <form type=\"submit\" onSubmit={(e) => handleSubmit(e)}>\n        <label htmlFor=\"playlist-input\">\n          Input spotify URI:\n          <input\n            id=\"playlist-input\"\n            type=\"text\"\n            value={input}\n            onChange={(e) => setInput(e.target.value)}\n          ></input>\n        </label>\n        <button disabled={fetching}>Fetch playlist!</button>\n      </form>\n      {playlist ? (\n        <div>\n          <h2>{playlist.name}</h2>\n          <a\n            href={getCsvHref(formattedTracks)}\n            download={`${playlist.name}.csv`}\n          >\n            Download csv\n          </a>\n          <table>\n            <thead>\n              <tr>\n                <th>Song title</th>\n                <th>Artists</th>\n              </tr>\n            </thead>\n            <tbody>\n              {formattedTracks.map((track, index) => (\n                <tr key={index}>\n                  <td>{track.name}</td>\n                  <td>{track.artists}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      ) : null}\n    </div>\n  )\n}\n\nexport default App\n","export function camelize(s) {\n  return s\n    .replace(\"_\", \" \")\n    .replace(/(?:^\\w|[A-Z]|\\b\\w)/g, function (word, index) {\n      return index === 0 ? word.toLowerCase() : word.toUpperCase()\n    })\n    .replace(/\\s+/g, \"\")\n}\n\nexport function removeHash() {\n  window.history.pushState(\n    \"\",\n    document.title,\n    window.location.pathname + window.location.search\n  )\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}